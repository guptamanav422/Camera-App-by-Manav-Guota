<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <!-- we can give src to video ya koi file ka path  -->
    <video autoplay ></video>
    <button id="record">Record</button>
   <script>
       let videoPlayer=document.querySelector("video");
       let recordBtn=document.querySelector("#record");
       let mediaRecorder;
       let chunks=[];
       let isRecording=false;

       recordBtn.addEventListener("click",()=>{
           if(isRecording)
           {
            //    recording ko stop krna hai 
            mediaRecorder.stop();
            isRecording=false;
           }
           else{
            //    recording ko on krna hai 
            mediaRecorder.start();
            isRecording=true;
           }
       })
    // Ye ek browser ke function hai jiski help se ham user se access krva
    // sakte hai uske media ko like camera and mike vgera 
       let promiseToUseCamera=navigator.mediaDevices.getUserMedia(
       {
        //    by defaul all are false  
           video:true,
           audio:true,
       });


       promiseToUseCamera.then((mediaStream)=>{

        // simple terms me mediaStream ek object hai jisme continuosly camera and mike
        // chlta rhega jisko hm badme video player ke source me lgadete hai taki vo camera chlta rhe
           videoPlayer.srcObject=mediaStream;
           mediaRecorder=new MediaRecorder(mediaStream);
           
           mediaRecorder.addEventListener("dataavailable",(e)=>{
               chunks.push(e.data);
           });
           mediaRecorder.addEventListener("stop",(e)=>{
               let blob=new Blob(chunks,{type:"video/mp4"});
               chunks=[];
               
               let url=URL.createObjectURL(blob);
               let a=document.createElement("a");
               a.href=url;
               a.download="video.mp4";
               a.click();
           })
       })
       .catch(()=>{
           console.log("User denied the access");
       })
   </script>
</body>
</html>